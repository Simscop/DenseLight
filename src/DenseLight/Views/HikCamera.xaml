<UserControl
    x:Class="DenseLight.Views.HikCamera"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:liftui="https://github.com/pchuan98/Lift.UI"
    xmlns:local="clr-namespace:DenseLight.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModel="clr-namespace:DenseLight.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewModel:CameraViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Grid>
        <Grid>
            <GroupBox
                BorderBrush="MediumPurple"
                Header="海康相机"
                Style="{DynamicResource ResourceKey=GroupBoxTab}">

                <StackPanel>
                    <UniformGrid Margin="1" Columns="5">
                        <Button
                            x:Name="OpenCam"
                            HorizontalAlignment="Stretch"
                            Command="{Binding OpenCameraCommand}"
                            Content="打开相机"
                            FontSize="12"
                            FontWeight="Bold"
                            IsEnabled="{Binding IsCamOpen}" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding CaptureCommand}"
                            Content="抓取单张"
                            FontSize="12"
                            FontWeight="Bold"
                            IsEnabled="{Binding IsCamOpen}"
                            Visibility="Collapsed" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding StartCaptureCommand}"
                            Content="开始采集"
                            FontSize="12"
                            FontWeight="Bold"
                            IsEnabled="{Binding CanAcquisition}" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding StopCaptureCommand}"
                            Content="停止采集"
                            FontSize="12"
                            FontWeight="Bold"
                            IsEnabled="{Binding IsAcquisition}" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding CloseCameraCommand}"
                            Content="关闭相机"
                            FontSize="12"
                            FontWeight="Bold"
                            IsEnabled="{Binding IsClosed}" />
                    </UniformGrid>

                    <UniformGrid Margin="1" Columns="4">
                        <StackPanel>
                            <TextBlock
                                HorizontalAlignment="Left"
                                FontSize="12"
                                FontWeight="Bold"
                                Text="当前曝光(ms)" />
                            <liftui:NumericUpDown
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontWeight="Bold"
                                IsEnabled="{Binding IsStartCapture}"
                                ValueFormat="N2"
                                Value="{Binding ExposureTime, StringFormat={}{0:F2}, Delay=200}" />
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="1">
                            <TextBlock
                                HorizontalAlignment="Left"
                                FontSize="12"
                                FontWeight="Bold"
                                Text="当前帧率(fps)" />
                            <liftui:NumericUpDown
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontWeight="Bold"
                                ValueFormat="N2"
                                Value="{Binding FrameRate}" />
                        </StackPanel>
                        <StackPanel Grid.Column="2" Margin="1">
                            <TextBlock
                                HorizontalAlignment="Left"
                                FontSize="12"
                                FontWeight="Bold"
                                Text="当前增益(dB)" />
                            <liftui:NumericUpDown
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontWeight="Bold"
                                ValueFormat="N2"
                                Value="{Binding Gain}" />
                        </StackPanel>
                        <StackPanel Grid.Column="3" Margin="1">
                            <TextBlock
                                HorizontalAlignment="Left"
                                FontSize="12"
                                FontWeight="Bold"
                                Text="像素格式" />
                            <TextBox
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontWeight="Bold"
                                IsReadOnly="True"
                                Text="{Binding PixelFormat}" />
                        </StackPanel>
                    </UniformGrid>

                    <UniformGrid Margin="1" Columns="4">
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding SetExposureCommand}"
                            Content="设置曝光"
                            FontSize="12"
                            FontWeight="Bold" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding SetFrameRateCommand}"
                            Content="设置帧率"
                            FontSize="12"
                            FontWeight="Bold" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Command="{Binding SetGainCommand}"
                            Content="设置增益"
                            FontSize="12"
                            FontWeight="Bold" />
                        <Button
                            HorizontalAlignment="Stretch"
                            Content="设置格式"
                            FontSize="12"
                            FontWeight="Bold" />
                    </UniformGrid>

                    <UniformGrid Margin="1" Columns="2">
                        <DockPanel>
                            <TextBox
                                Width="300"
                                VerticalAlignment="Center"
                                DockPanel.Dock="Right"
                                FontSize="12"
                                Text="{Binding Root}" />
                            <TextBlock
                                Margin="1"
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontWeight="Bold"
                                Text="存储路径" />
                        </DockPanel>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button
                                Margin="1"
                                VerticalAlignment="Center"
                                Command="{Binding SelectRootCommand}"
                                Content="选择路径" />
                            <Button
                                Margin="1"
                                VerticalAlignment="Center"
                                Command="{Binding SaveCaptureCommand}"
                                Content="保存图片" />
                        </StackPanel>
                    </UniformGrid>

                </StackPanel>

            </GroupBox>

        </Grid>



    </Grid>
</UserControl>
